# disable the automatic find-debuginfo script.
%define debug_package %{nil}

Name:           {{ pkg.name }}
Version:        {{ pkg.version}}
Release:        1%{?dist}
Summary:        {{ pkg.description }}
License:        {{ pkg.license }}
Source0:        {{ pkg.name }}-{{ pkg.version }}.tar.gz

%description
{{ pkg.description }}

%prep
%setup -q -n {{ builder.archive_root_dir }}

%build
# This section is empty as the binary is pre-compiled.

%install
rm -rf %{buildroot}
{% for asset in builder.assets %}
install -D -m {{ asset.mode | default(value="0644") }} "{{ asset.source | split(pat="/") | last }}" "%{buildroot}{{ asset.dest }}"
{% endfor %}

%files
%defattr(-, root, root, -)

# This loop will now be populated by the tool itself.
# It will generate a %dir directive for every directory needed by your assets.
{% if builder.created_dirs %}
{% for dir in builder.created_dirs %}
%dir {{ dir }}
{% endfor %}
{% endif %}

{% for asset in builder.assets %}
{{ asset.dest }}
{% endfor %}

{% if builder.changelog %}
%changelog
{{ builder.changelog | trim }}
{% endif %}